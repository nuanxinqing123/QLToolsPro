import{s as e}from"./pinia-1ca0c29b.js";import{c as a}from"./store-325aa5d6.js";import{E as l}from"./ant-design-vue-93fc40b2.js";import{N as t,r as o,w as i,o as s,f as n,i as r,u as c,$ as u,U as p,a2 as g,_ as d,a4 as v,a6 as m,a0 as h,c as S,a5 as b,M as y,a3 as f}from"./@vue-11129043.js";const w={key:1,class:"flex-base flex flex-column"},x={key:0,class:"td-all-data"},z=["innerHTML"],k={key:0},N={__name:"page-container",props:{columns:Array,dataSource:Array,isTable:Boolean,isNoYScroll:Boolean,total:[Number,String],pageNum:[Number,String],pageSize:[Number,String],isSearch:Boolean,isScroll:Boolean,isCenter:Boolean,isRowSelection:Boolean,isNoPagination:Boolean,rowSelection:Object},emits:["update:current","update:pageSize","update:total","onShowSizeChange","initData"],setup(N,{emit:C}){const H=N,_=l.PRESENTED_IMAGE_SIMPLE,{siteSettings:T,isMobile:$,routerPageHeight:B}=e(a),{isNoPagination:D,pageSize:E,isNoYScroll:j,isCenter:M,isScroll:A,total:P,pageNum:I,columns:L,dataSource:R,isTable:K,isSearch:U}=t(H),Y=o([]),q=o(null),G=o(0);i(R,((e,a,l)=>{K.value&&O()})),s((()=>{setTimeout((()=>{try{if(!j.value)try{G.value=q.value.clientHeight||q.value.$el.clientHeight}catch(e){}}catch(e){}K.value&&O(),C("initData")}),0),window.addEventListener("resize",(()=>{setTimeout((()=>{if(K.value&&O(),K.value&&!j.value)try{G.value=q.value.clientHeight||q.value.$el.clientHeight}catch(e){}}),10)}))}));const O=()=>{$.value?(Y.value=[{title:"所有",dataIndex:"allData",customAllKey:"allData",customKey:"operation"}],R.value.length&&(R.value=R.value.map((e=>{let a="";for(let l in e){const t=L.value.filter((e=>e.dataIndex==l))[0]||null;t&&(a+="<p class='word-break table-alldata-list'>"+t.title+"："+e[l]+"</p>")}return e.allData=a,e})))):Y.value=L.value},F=(e,a)=>{C("update:current",e),C("update:pageSize",a),C("onShowSizeChange")},J=e=>{};return(e,a)=>{const l=f("a-empty"),t=f("a-table"),o=f("a-pagination");return n(),r("div",{style:h({height:c(B)+"px"}),class:u(["pc-page flex flex-column",[c(A)||c($)?"overflow-scroll":"",c(M)?"align-center":"",c(T).web_bg?"pc-page-bg":""]])},[c(U)?(n(),r("div",{key:0,class:u(["pc-page-search",c($)?"mobile-search":""])},[p(e.$slots,"search")],2)):g("",!0),p(e.$slots,"top",{height:c(B)}),c(K)?(n(),r("div",w,[d("div",{class:u(["flex-base",c(j)||c($)?"":"table-list-container"]),ref_key:"tableRef",ref:q},[c(j)||G.value?(n(),v(t,{key:0,columns:Y.value,showHeader:!c($),"data-source":c(R),"row-selection":N.isRowSelection?N.rowSelection:null,pagination:!1,class:"table-list",scroll:{x:c($)?null:500,y:c($)||c(j)?null:G.value-55}},{bodyCell:m((({text:a,record:l,index:t,column:o})=>["allData"===o.customAllKey&&c($)?(n(),r("div",x,[d("div",{innerHTML:a},null,8,z),p(e.$slots,"bodyCell",{text:a,record:l,index:t,column:o})])):g("",!0),c($)?g("",!0):p(e.$slots,"bodyCell",{key:1,text:a,record:l,index:t,column:o})])),emptyText:m((()=>[d("div",{class:"table-empty flex align-items",style:h({height:G.value-110+"px"})},[S(l,{image:c(_)},null,8,["image"])],4)])),_:3},8,["columns","showHeader","data-source","row-selection","scroll"])):g("",!0)],2),c(D)?g("",!0):(n(),r("div",{key:0,class:u(["flex content-between align-center table-pagination",c(P)?"":"visibility-view"])},[c(P)?(n(),r("div",k," 共"+b(c(P)||0)+"条记录 ",1)):g("",!0),c(P)?(n(),v(o,{key:1,"show-size-changer":"","show-quick-jumper":"",current:c(I),"onUpdate:current":a[0]||(a[0]=e=>y(I)?I.value=e:null),pageSize:c(E),"onUpdate:pageSize":a[1]||(a[1]=e=>y(E)?E.value=e:null),total:c(P),onChange:F,onShowSizeChange:J},null,8,["current","pageSize","total"])):g("",!0)],2))])):g("",!0),p(e.$slots,"bottom")],6)}}};export{N as _};
